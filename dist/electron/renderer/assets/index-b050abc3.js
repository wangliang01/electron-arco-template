import{P as R,_ as L}from"./index-5259c4bc.js";import"./index-9f147a7c.js";import"./index-ff321b56.js";import{d as S,f as i,b0 as k,C as F,aE as w,aG as o,aI as e,F as j,G as x,aM as C,aN as A,u as _,aF as H,bS as Z,bo as U,bV as O,bu as q,bT as z,bU as N,bb as W,bY as Y,bZ as J,D as K,bc as Q}from"./arco-adc6c535.js";import"./index-bdf6b15a.js";import"./index-3250ff6a.js";import{q as X,u as tt,a as et,b as at,c as ot}from"./visualization-496061a4.js";import"./index-8259b3ef.js";import"./index-97e73ebb.js";import"./index-467baea6.js";import"./index-fbf88a6b.js";import{u as D}from"./chart-option-09ed5b2e.js";import{u as I}from"./loading-f0025922.js";import"./index-f5ef5fbf.js";import"./index-3a46639e.js";import"./index-3281bd49.js";import"./index-5e44522e.js";import"./index-c7bd6e11.js";import"./index-342e332b.js";import"./chart-28c88d04.js";import"./vue-bc752e41.js";const nt={class:"content-wrap"},st={class:"content"},lt={class:"desc"},rt={class:"chart"},it=S({__name:"chain-item",props:{title:{type:String,default:""},quota:{type:String,default:""},chartType:{type:String,default:""},cardStyle:{type:Object,default:()=>({})}},setup(g){const c=()=>{const u=i([]),{chartOption:h}=D(()=>({grid:{left:0,right:0,top:10,bottom:0},xAxis:{type:"category",show:!1},yAxis:{show:!1},tooltip:{show:!0,trigger:"axis"},series:{name:"total",data:u,type:"bar",barWidth:7,itemStyle:{borderRadius:2}}}));return{data:u,chartOption:h}},l=()=>{const u=i([[],[]]),{chartOption:h}=D(()=>({grid:{left:0,right:0,top:10,bottom:0},xAxis:{type:"category",show:!1},yAxis:{show:!1},tooltip:{show:!0,trigger:"axis"},series:[{name:"2001",data:u.value[0],type:"line",showSymbol:!1,smooth:!0,lineStyle:{color:"#165DFF",width:3}},{name:"2002",data:u.value[1],type:"line",showSymbol:!1,smooth:!0,lineStyle:{color:"#6AA1FF",width:3,type:"dashed"}}]}));return{data:u,chartOption:h}},d=()=>{const u=i([]),{chartOption:h}=D(()=>({grid:{left:0,right:0,top:0,bottom:0},legend:{show:!0,top:"center",right:"0",orient:"vertical",icon:"circle",itemWidth:6,itemHeight:6,textStyle:{color:"#4E5969"}},tooltip:{show:!0},series:[{name:"总计",type:"pie",radius:["50%","70%"],label:{show:!1},data:u}]}));return{data:u,chartOption:h}},s=g,{loading:n,setLoading:p}=I(!0),{chartOption:f,data:m}=l(),{chartOption:E,data:a}=c(),{chartOption:t,data:r}=d(),v=i({count:0,growth:0,chartData:[]}),b=i({});return(async u=>{try{const{data:h}=await X(u);v.value=h;const{chartData:$}=h;s.chartType==="bar"?($.forEach((y,T)=>{a.value.push({value:y.y,itemStyle:{color:T%2?"#2CAB40":"#86DF6C"}})}),b.value=E.value):s.chartType==="line"?($.forEach(y=>{y.name==="2021"?m.value[0].push(y.y):m.value[1].push(y.y)}),b.value=f.value):($.forEach(y=>{r.value.push(y)}),b.value=t.value)}catch{}finally{p(!1)}})({quota:s.quota}),(u,h)=>{const $=Z,y=U,T=R,V=k("Chart"),G=O,M=q;return F(),w(M,{loading:_(n),style:{width:"100%"}},{default:o(()=>[e(G,{bordered:!1,style:j(g.cardStyle)},{default:o(()=>[x("div",nt,[x("div",st,[e($,{title:g.title,value:v.value.count,"value-from":0,animation:"","show-group-separator":""},null,8,["title","value"]),x("div",lt,[e(y,{type:"secondary",class:"label"},{default:o(()=>[C(A(u.$t("dataAnalysis.card.yesterday")),1)]),_:1}),e(y,{type:"danger"},{default:o(()=>[C(A(v.value.growth)+" ",1),e(T)]),_:1})])]),x("div",rt,[_(n)?H("",!0):(F(),w(V,{key:0,option:b.value},null,8,["option"]))])])]),_:1},8,["style"])]),_:1},8,["loading"])}}});const B=L(it,[["__scopeId","data-v-54421fb7"]]),ct=S({__name:"public-opinion",setup(g){const{isDark:c}=tt();return(l,d)=>{const s=z,n=N,p=O;return F(),w(p,{class:"general-card",title:l.$t("dataAnalysis.title.publicOpinion"),"header-style":{paddingBottom:"12px"}},{default:o(()=>[e(n,{cols:24,"col-gap":12,"row-gap":12},{default:o(()=>[e(s,{span:{xs:12,sm:12,md:12,lg:12,xl:6,xxl:6}},{default:o(()=>[e(B,{title:l.$t("dataAnalysis.card.title.allVisitors"),quota:"visitors","chart-type":"line","card-style":{background:_(c)?"linear-gradient(180deg, #284991 0%, #122B62 100%)":"linear-gradient(180deg, #f2f9fe 0%, #e6f4fe 100%)"}},null,8,["title","card-style"])]),_:1}),e(s,{span:{xs:12,sm:12,md:12,lg:12,xl:6,xxl:6}},{default:o(()=>[e(B,{title:l.$t("dataAnalysis.card.title.contentPublished"),quota:"published","chart-type":"bar","card-style":{background:_(c)?" linear-gradient(180deg, #3D492E 0%, #263827 100%)":"linear-gradient(180deg, #F5FEF2 0%, #E6FEEE 100%)"}},null,8,["title","card-style"])]),_:1}),e(s,{span:{xs:12,sm:12,md:12,lg:12,xl:6,xxl:6}},{default:o(()=>[e(B,{title:l.$t("dataAnalysis.card.title.totalComment"),quota:"comment","chart-type":"line","card-style":{background:_(c)?"linear-gradient(180deg, #294B94 0%, #0F275C 100%)":"linear-gradient(180deg, #f2f9fe 0%, #e6f4fe 100%)"}},null,8,["title","card-style"])]),_:1}),e(s,{span:{xs:12,sm:12,md:12,lg:12,xl:6,xxl:6}},{default:o(()=>[e(B,{title:l.$t("dataAnalysis.card.title.totalShare"),quota:"share","chart-type":"pie","card-style":{background:_(c)?"linear-gradient(180deg, #312565 0%, #201936 100%)":"linear-gradient(180deg, #F7F7FF 0%, #ECECFF 100%)"}},null,8,["title","card-style"])]),_:1})]),_:1})]),_:1},8,["title"])}}}),dt=S({__name:"content-period-analysis",setup(g){const c=a=>a.map(t=>`<div class="content-panel">
        <p>
          <span style="background-color: ${t.color}" class="tooltip-item-icon"></span>
          <span>${t.seriesName}</span>
        </p>
        <span class="tooltip-value">
        ${t.value}%
        </span>
      </div>`).join(""),{loading:l,setLoading:d}=I(!0),s=i([]),n=i([]),p=i([]),f=i([]),{chartOption:m}=D(a=>({grid:{left:"40",right:0,top:"20",bottom:"100"},legend:{bottom:0,icon:"circle",textStyle:{color:"#4E5969"}},xAxis:{type:"category",data:s.value,boundaryGap:!1,axisLine:{lineStyle:{color:a?"#3f3f3f":"#A9AEB8"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{color:"#86909C"},interval(t){return!(t===0||t===s.value.length-1)}},axisLabel:{color:"#86909C",formatter(t,r){return r===0||r===s.value.length-1?"":`${t}`}}},yAxis:{type:"value",axisLabel:{color:"#86909C",formatter:"{value}%"},splitLine:{lineStyle:{color:a?"#3F3F3F":"#E5E6EB"}}},tooltip:{show:!0,trigger:"axis",formatter(t){const[r]=t;return`<div>
            <p class="tooltip-title">${r.axisValueLabel}</p>
            ${c(t)}
          </div>`},className:"echarts-tooltip-diy"},series:[{name:"纯文本",data:n.value,type:"line",smooth:!0,showSymbol:!1,color:a?"#3D72F6":"#246EFF",symbol:"circle",symbolSize:10,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#E0E3FF"}}},{name:"图文类",data:p.value,type:"line",smooth:!0,showSymbol:!1,color:a?"#A079DC":"#00B2FF",symbol:"circle",symbolSize:10,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#E2F2FF"}}},{name:"视频类",data:f.value,type:"line",smooth:!0,showSymbol:!1,color:a?"#6CAAF5":"#81E2FF",symbol:"circle",symbolSize:10,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#D9F6FF"}}}],dataZoom:[{bottom:40,type:"slider",left:40,right:14,height:14,borderColor:"transparent",handleIcon:"image://http://p3-armor.byteimg.com/tos-cn-i-49unhts6dw/1ee5a8c6142b2bcf47d2a9f084096447.svg~tplv-49unhts6dw-image.image",handleSize:"20",handleStyle:{shadowColor:"rgba(0, 0, 0, 0.2)",shadowBlur:4},brushSelect:!1,backgroundColor:a?"#313132":"#F2F3F5"},{type:"inside",start:0,end:100,zoomOnMouseWheel:!1}]}));return(async()=>{d(!0);try{const{data:a}=await et();s.value=a.xAxis,a.data.forEach(t=>{t.name==="纯文本"?n.value=t.value:t.name==="图文类"&&(p.value=t.value),f.value=t.value})}catch{}finally{d(!1)}})(),(a,t)=>{const r=k("Chart"),v=O,b=q;return F(),w(b,{loading:_(l),style:{width:"100%"}},{default:o(()=>[e(v,{class:"general-card","header-style":{paddingBottom:"16px"}},{title:o(()=>[C(A(a.$t("dataAnalysis.contentPeriodAnalysis")),1)]),default:o(()=>[e(r,{style:{width:"100%",height:"370px"},option:_(m)},null,8,["option"])]),_:1})]),_:1},8,["loading"])}}});const pt=L(dt,[["__scopeId","data-v-545dc300"]]),ut=S({__name:"content-publish-ratio",setup(g){const c=a=>a.map(t=>`<div class="content-panel">
    <p>
      <span style="background-color: ${t.color}" class="tooltip-item-icon"></span>
      <span>
      ${t.seriesName}
      </span>
    </p>
    <span class="tooltip-value">
      ${Number(t.value).toLocaleString()}
    </span>
  </div>`).join(""),{loading:l,setLoading:d}=I(!0),s=i([]),n=i([]),p=i([]),f=i([]),{chartOption:m}=D(a=>({grid:{left:"4%",right:0,top:"20",bottom:"60"},legend:{bottom:0,icon:"circle",textStyle:{color:"#4E5969"}},xAxis:{type:"category",data:s.value,axisLine:{lineStyle:{color:a?"#3f3f3f":"#A9AEB8"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{color:"#86909C"}},axisLabel:{color:"#86909C"}},yAxis:{type:"value",axisLabel:{color:"#86909C",formatter(t,r){return r===0?`${t}`:`${t/1e3}k`}},splitLine:{lineStyle:{color:a?"#3F3F3F":"#E5E6EB"}}},tooltip:{show:!0,trigger:"axis",formatter(t){const[r]=t;return`<div>
            <p class="tooltip-title">${r.axisValueLabel}</p>
            ${c(t)}
          </div>`},className:"echarts-tooltip-diy"},series:[{name:"纯文本",data:n.value,stack:"one",type:"bar",barWidth:16,color:a?"#4A7FF7":"#246EFF"},{name:"图文类",data:p.value,stack:"one",type:"bar",color:a?"#085FEF":"#00B2FF"},{name:"视频类",data:f.value,stack:"one",type:"bar",color:a?"#01349F":"#81E2FF",itemStyle:{borderRadius:2}}]}));return(async()=>{d(!0);try{const{data:a}=await at();s.value=a[0].x,a.forEach(t=>{t.name==="纯文本"?n.value=t.y:t.name==="图文类"&&(p.value=t.y),f.value=t.y})}catch{}finally{d(!1)}})(),(a,t)=>{const r=W,v=k("Chart"),b=O,P=q;return F(),w(P,{loading:_(l),style:{width:"100%"}},{default:o(()=>[e(b,{class:"general-card","header-style":{paddingBottom:"14px"}},{title:o(()=>[C(A(a.$t("dataAnalysis.contentPublishRatio")),1)]),extra:o(()=>[e(r,null,{default:o(()=>[C(A(a.$t("workplace.viewMore")),1)]),_:1})]),default:o(()=>[e(v,{style:{width:"100%",height:"347px"},option:_(m)},null,8,["option"])]),_:1})]),_:1},8,["loading"])}}}),mt=S({__name:"popular-author",setup(g){const{loading:c,setLoading:l}=I(),d=i({list:[]});return(async()=>{try{l(!0);const{data:n}=await ot();d.value=n}catch{}finally{l(!1)}})(),(n,p)=>{const f=W,m=Y,E=J,a=O,t=q;return F(),w(t,{loading:_(c),style:{width:"100%"}},{default:o(()=>[e(a,{class:"general-card","header-style":{paddingBottom:"14px"}},{title:o(()=>[C(A(n.$t("dataAnalysis.popularAuthor")),1)]),extra:o(()=>[e(f,null,{default:o(()=>[C(A(n.$t("workplace.viewMore")),1)]),_:1})]),default:o(()=>[e(E,{data:d.value.list,pagination:!1,bordered:!1,style:{"margin-bottom":"20px"},scroll:{x:"100%",y:"350px"}},{columns:o(()=>[e(m,{title:n.$t("dataAnalysis.popularAuthor.column.ranking"),"data-index":"ranking"},null,8,["title"]),e(m,{title:n.$t("dataAnalysis.popularAuthor.column.author"),"data-index":"author"},null,8,["title"]),e(m,{title:n.$t("dataAnalysis.popularAuthor.column.content"),"data-index":"contentCount",sortable:{sortDirections:["ascend","descend"]}},null,8,["title"]),e(m,{title:n.$t("dataAnalysis.popularAuthor.column.click"),"data-index":"clickCount",sortable:{sortDirections:["ascend","descend"]}},null,8,["title"])]),_:1},8,["data"])]),_:1})]),_:1},8,["loading"])}}});const _t=L(mt,[["__scopeId","data-v-be92887b"]]),ht={class:"container"},yt={class:"space-unit"},ft={name:"DataAnalysis"},gt=S({...ft,setup(g){return(c,l)=>{const d=k("Breadcrumb"),s=z,n=N,p=Q;return F(),K("div",ht,[e(d,{items:["menu.visualization","menu.visualization.dataAnalysis"]},null,8,["items"]),e(p,{direction:"vertical",size:12,fill:""},{default:o(()=>[e(p,{direction:"vertical",size:16,fill:""},{default:o(()=>[x("div",yt,[e(ct)]),x("div",null,[e(n,{cols:24,"col-gap":16,"row-gap":16},{default:o(()=>[e(s,{span:{xs:24,sm:24,md:24,lg:24,xl:16,xxl:16}},{default:o(()=>[e(ut)]),_:1}),e(s,{span:{xs:24,sm:24,md:24,lg:24,xl:8,xxl:8}},{default:o(()=>[e(_t)]),_:1})]),_:1})]),x("div",null,[e(pt)])]),_:1})]),_:1})])}}});const Wt=L(gt,[["__scopeId","data-v-c53c756d"]]);export{Wt as default};
